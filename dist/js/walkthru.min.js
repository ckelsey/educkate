!function(t){t.directive("walkthru",["$timeout","$sce","$compile",function(t,e,o){return{restrict:"E",scope:{steps:"=steps",index:"=?index",blur:"@blur"},template:'<div class=c-walkthru__wrapper ng-if=steps2Do.steps.length><div class=c-walkthru__blocker ng-style="getBlockerStyle(\'top\')"></div><div class=c-walkthru__blocker ng-style="getBlockerStyle(\'right\')"></div><div class=c-walkthru__blocker ng-style="getBlockerStyle(\'bottom\')"></div><div class=c-walkthru__blocker ng-style="getBlockerStyle(\'left\')"></div><div class=c-walkthru__box ng-style="getBlockerStyle(\'message\')"><div class=c-walkthru__box-inner><div ng-bind-html=makeSafe(text)></div><div class=c-walkthru__buttons><button ng-click=doPrevious() class=c-walkthru__button__previous><i class="fa fa-arrow-left"></i></button> <button ng-click=doNext() class=c-walkthru__button__next><i class="fa fa-arrow-right"></i></button></div><button ng-click=doDone() class=c-walkthru__button__done><i class="fa fa-close"></i></button></div></div></div>',link:function(n,s,l){n.proxyIndex=n.index?angular.copy(n.index):0,n.steps2Do=null,n.text=null,n.defaultBlockStyles={top:{top:"0px",left:"0px",width:"100%",height:"50%"},bottom:{top:"50%",left:"0px",width:"100%",height:"50%"},left:{top:"0px",left:"0px",width:"0px",height:"0px"},right:{top:"0px",left:"0px",width:"0px",height:"0px"},message:{top:"0px",left:"0px"}},n.blockStyles=angular.copy(n.defaultBlockStyles);var r={37:1,38:1,39:1,40:1},i=function(t){t.preventDefault(),t.stopPropagation(),t.returnValue=!1},p=function(t){return r[t.keyCode]?(i(t),!1):void 0},a=function(){window.addEventListener("mousewheel",i,!0),window.addEventListener("wheel",i,!0),window.addEventListener("touchmove",i,!0),window.addEventListener("keydown",p,!0)},u=function(){window.removeEventListener("mousewheel",i,!0),window.removeEventListener("wheel",i,!0),window.removeEventListener("touchmove",i,!0),window.removeEventListener("keydown",p,!0)},c=function(t){if(t.parentNode&&"BODY"!==t.parentNode.tagName){var e=angular.element(t.parentNode);e.addClass("walkthru_item_parent"),c(e[0])}},d=function(e,o){t(function(){if(n.blockStyles=angular.copy(n.defaultBlockStyles),e){window.scrollTo(e.offsetLeft-14,e.offsetTop-14);var t=e.getBoundingClientRect(),s=o.getBoundingClientRect();n.blockStyles.top.height=t.top+"px",n.blockStyles.bottom.top=t.bottom+"px",n.blockStyles.bottom.height=window.innerHeight-t.bottom+"px",n.blockStyles.left.top=t.top+"px",n.blockStyles.left.width=t.left+"px",n.blockStyles.left.height=t.bottom-t.top+"px",n.blockStyles.right.top=t.top+"px",n.blockStyles.right.left=t.left+t.width+"px",n.blockStyles.right.width=window.innerWidth-(t.left+t.width)+"px",n.blockStyles.right.height=t.bottom-t.top+"px",parseInt(n.blockStyles.top.height)>parseInt(n.blockStyles.bottom.height)?n.blockStyles.message.top=parseInt(n.blockStyles.top.height)-s.height-7<0?"0px":parseInt(n.blockStyles.top.height)-s.height-7+"px":s.height+7>parseInt(n.blockStyles.bottom.height)?n.blockStyles.message.top=parseInt(n.blockStyles.bottom.top)-(s.height-parseInt(n.blockStyles.bottom.height))+"px":n.blockStyles.message.top=parseInt(n.blockStyles.bottom.top)+7+"px",n.blockStyles.message.left=(window.innerWidth-s.width)/2+"px"}else{var s=o.getBoundingClientRect();n.blockStyles.message.top=(window.innerHeight-s.height)/2+"px",n.blockStyles.message.left=(window.innerWidth-s.width)/2+"px"}})},h=function(){var t=s[0].querySelector(".c-walkthru__button__next"),e=s[0].querySelector(".c-walkthru__button__previous");n.steps2Do.steps[n.proxyIndex+1]?t.className="c-walkthru__button__next":t.className="c-walkthru__button__next disabled",n.steps2Do.steps[n.proxyIndex-1]?e.className="c-walkthru__button__previous":e.className="c-walkthru__button__previous disabled"},y=function(){var t=angular.element(document.querySelectorAll(".walkthru_item_parent"));t.removeClass("walkthru_item_parent"),t=angular.element(document.querySelectorAll(".walkthru_item")),t.removeClass("walkthru_item")};n.makeSafe=function(t){return e.trustAsHtml(t)},n.doNext=function(){n.proxyIndex=n.steps2Do.steps[n.proxyIndex+1]?n.proxyIndex+1:0,n.steps2Do.hasOwnProperty("onNext")&&"function"==typeof n.steps2Do.onNext&&n.steps2Do.onNext(),w=40,n.doStep()},n.doPrevious=function(){n.proxyIndex=n.steps2Do.steps[n.proxyIndex-1]?n.proxyIndex-1:0,n.steps2Do.hasOwnProperty("onPrevious")&&"function"==typeof n.steps2Do.onPrevious&&n.steps2Do.onPrevious(),w=40,n.doStep()},n.doDone=function(){t(function(){n.steps2Do.hasOwnProperty("onDone")&&"function"==typeof n.steps2Do.onDone&&n.steps2Do.onDone(),u(),n.steps2Do=null,angular.element(document.body).removeClass("c-walkthru__body"),angular.element(document.body).removeClass("c-walkthru__body_blur"),y(),s.removeClass("active"),n.steps=null})},n.getBlockerStyle=function(t){return n.blockStyles[t]};var x=null,w=40;n.doStep=function(){if(t.cancel(x),n.steps2Do){y(),n.blur!==!0&&"true"!==n.blur||c(s[0]);var e=n.steps2Do.steps[n.proxyIndex].element?document.querySelector(n.steps2Do.steps[n.proxyIndex].element):null,l=s[0].querySelector(".c-walkthru__box");if((n.steps2Do.steps[n.proxyIndex].element&&e||!n.steps2Do.steps[n.proxyIndex].element)&&l){if(n.steps2Do.steps[n.proxyIndex].hasOwnProperty("fn")&&"function"==typeof n.steps2Do.steps[n.proxyIndex].fn&&n.steps2Do.steps[n.proxyIndex].fn(),n.text=n.steps2Do.steps[n.proxyIndex].text,h(),n.steps2Do.steps[n.proxyIndex].element){var r=11,i=function(){var t=e.getBoundingClientRect();!t.height&&r?setTimeout(function(){r--,i()},100):(angular.element(e).addClass("walkthru_item"),n.blur!==!0&&"true"!==n.blur||c(e),d(e,l))};i()}else d(null,l);o(s.contents())(n)}else w&&(x=t(function(){w--,n.doStep()},50))}},n.run=function(e){n.steps&&n.steps.steps&&n.steps.steps.length&&t(function(){a(),n.steps2Do=angular.copy(n.steps),s.addClass("active"),n.doStep()})},n.init=function(){n.steps&&n.steps.steps&&n.steps.steps.length&&t(function(){w=40,n.blur!==!0&&"true"!==n.blur||angular.element(document.body).addClass("c-walkthru__body_blur"),angular.element(document.body).addClass("c-walkthru__body"),n.proxyIndex=n.index?angular.copy(n.index):0,n.steps.hasOwnProperty("onInitialize")&&"function"==typeof n.steps.onInitialize&&n.steps.onInitialize(),n.run()})},n.steps&&n.init();var b=null,f=function(){clearTimeout(b),n.steps&&(b=setTimeout(function(){n.run()},20))};window.addEventListener("resize",f,!0),n.$watchCollection(function(){return n.steps},function(t,e){t!==e&&t&&t.hasOwnProperty("steps")&&t.steps.length&&n.init()})}}}])}(angular.module("walKthru",[]));
//# sourceMappingURL=walkthru.min.js.map